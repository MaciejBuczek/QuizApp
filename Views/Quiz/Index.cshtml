@model List<QuizApp.Models.Quiz>

<div class="row mt-5">
    <div class="col-8">
        <h3>Quizzes</h3>
    </div>
    <div class="col-4">
        <button class="btn btn-primary float-right" style="cursor:pointer" id="createLobbyButton" onclick="" disabled>
            <i class="fas fa-user-friends">
                Create Lobby
            </i>
        </button>
        <button class="btn btn-primary float-right mr-4" style="cursor:pointer" id="startQuizButton" onclick="" disabled>
            <i class="fas fa-user-alt">
                Start Quiz
            </i>
        </button>
    </div>
</div>
<table class="table table-striped table-hover user-select-none mt-4" style="cursor:pointer">
    @foreach (var quiz in Model)
    {
        <tr>
            <td onclick="selectQuiz(this)">
                <input type="hidden" value=@quiz.Id />
                <div class="text-primary h3 float-left w-75">@quiz.Title</div>
                <div class="float-left w-25 pr-4 text-right">
                    <i class="far fa-star"></i>
                    <i class="far fa-star"></i>
                    <i class="far fa-star"></i>
                    <i class="far fa-star"></i>
                    <i class="far fa-star"></i>
                    &nbsp;(0)
                </div>
                <br />
                <br />
                <div class="float-left w-25 mt-2">
                    <h7><i class="far fa-question-circle"></i> &nbsp;<span class="font-weight-bold">Total questions:&nbsp; </span>@quiz.Questions.Count</h7>
                    <br />
                    <h7><i class="far fa-clock"></i> &nbsp;<span class="font-weight-bold">Total time requried:&nbsp; </span>@quiz.Questions.Sum(q => q.Time) s</h7>
                    <br />
                    <h7><i class="fas fa-medal"></i> &nbsp;<span class="font-weight-bold">Total points:&nbsp; </span>@quiz.Questions.Sum(q => q.Points)</h7>
                    <br />
                    <h7><i class="far fa-calendar-alt"></i> &nbsp;<span class="font-weight-bold">Created at:&nbsp; </span>@quiz.CreatedAt.ToShortDateString()</h7>
                </div>
                <div class="float-left w-75">
                    @Html.Raw(quiz.Description)
                </div>
            </td>
        </tr>
    }
</table>

@section Scripts{
    <script>

        var editButton = document.getElementById("createLobbyButton");
        var removeButton = document.getElementById("startQuizButton");
        var selectedElement = null;

        function selectQuiz(target) {
            if (selectedElement != null) {
                selectedElement.classList.remove("bg-info");
            }
            if (target == selectedElement) {
                editButton.disabled = true;
                removeButton.disabled = true;
                selectedElement = null;
            }
            else {
                target.classList.add("bg-info");
                editButton.disabled = false;
                removeButton.disabled = false;
                selectedElement = target;
            }
        }

    </script>
}